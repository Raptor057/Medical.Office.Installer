$ErrorActionPreference = "Stop"

$env:GHCR_USERNAME = "@GHCR_USERNAME@"
$env:GHCR_PAT = "@GHCR_PAT@"

# Verificar Docker
powershell -ExecutionPolicy Bypass -File "scripts\check_docker_windows.ps1"

# Login a GHCR
$env:GHCR_PAT | docker login ghcr.io -u $env:GHCR_USERNAME --password-stdin

Write-Host "üîç Verificando actualizaciones de im√°genes..."
docker-compose pull

Write-Host "‚è¨ Apagando contenedores anteriores (si existen)..."
docker-compose down

Write-Host "üöÄ Iniciando contenedores..."
docker-compose up -d
